/**
This notice must be untouched at all times.
This is the COMPRESSED version of Draw2D
WebSite: http://www.draw2d.org
Copyright: 2006 Andreas Herz. All rights reserved.
Created: 5.11.2006 by Andreas Herz (Web: http://www.freegroup.de )
LICENSE: LGPL
**/

draw2d.Canvas=function(_13b){try{if(_13b){this.construct(_13b);}this.enableSmoothFigureHandling=false;this.canvasLines=new draw2d.ArrayList();}catch(e){pushErrorStack(e,"draw2d.Canvas=function(/*:String*/id)");}};draw2d.Canvas.IMAGE_BASE_URL="";draw2d.Canvas.prototype.type="draw2d.Canvas";draw2d.Canvas.prototype.construct=function(_13c){this.canvasId=_13c;this.html=document.getElementById(this.canvasId);this.scrollArea=document.body.parentNode;};draw2d.Canvas.prototype.setViewPort=function(_13d){this.scrollArea=document.getElementById(_13d);};draw2d.Canvas.prototype.addFigure=function(_13e,xPos,yPos,_141){try{if(this.enableSmoothFigureHandling===true){if(_13e.timer<=0){_13e.setAlpha(0.001);}var _142=_13e;var _143=function(){if(_142.alpha<1){_142.setAlpha(Math.min(1,_142.alpha+0.05));}else{window.clearInterval(_142.timer);_142.timer=-1;}};if(_142.timer>0){window.clearInterval(_142.timer);}_142.timer=window.setInterval(_143,30);}_13e.setCanvas(this);if(xPos&&yPos){_13e.setPosition(xPos,yPos);}if(_13e instanceof draw2d.Line){this.canvasLines.add(_13e);this.html.appendChild(_13e.getHTMLElement());}else{var obj=this.canvasLines.getFirstElement();if(obj===null){this.html.appendChild(_13e.getHTMLElement());}else{this.html.insertBefore(_13e.getHTMLElement(),obj.getHTMLElement());}}if(!_141){_13e.paint();}}catch(e){pushErrorStack(e,"draw2d.Canvas.prototype.addFigure= function( /*:draw2d.Figure*/figure,/*:int*/ xPos,/*:int*/ yPos, /*:boolean*/ avoidPaint)");}};draw2d.Canvas.prototype.removeFigure=function(_145){if(this.enableSmoothFigureHandling===true){var _146=this;var _147=_145;var _148=function(){if(_147.alpha>0){_147.setAlpha(Math.max(0,_147.alpha-0.05));}else{window.clearInterval(_147.timer);_147.timer=-1;_146.html.removeChild(_147.html);_147.setCanvas(null);}};if(_147.timer>0){window.clearInterval(_147.timer);}_147.timer=window.setInterval(_148,20);}else{this.html.removeChild(_145.html);_145.setCanvas(null);}if(_145 instanceof draw2d.Line){this.canvasLines.remove(_145);}};draw2d.Canvas.prototype.getEnableSmoothFigureHandling=function(){return this.enableSmoothFigureHandling;};draw2d.Canvas.prototype.setEnableSmoothFigureHandling=function(flag){this.enableSmoothFigureHandling=flag;};draw2d.Canvas.prototype.getWidth=function(){return parseInt(this.html.style.width);};draw2d.Canvas.prototype.setWidth=function(_14a){if(this.scrollArea!==null){this.scrollArea.style.width=_14a+"px";}else{this.html.style.width=_14a+"px";}};draw2d.Canvas.prototype.getHeight=function(){return parseInt(this.html.style.height);};draw2d.Canvas.prototype.setHeight=function(_14b){if(this.scrollArea!==null){this.scrollArea.style.height=_14b+"px";}else{this.html.style.height=_14b+"px";}};draw2d.Canvas.prototype.setBackgroundImage=function(_14c,_14d){if(_14c!==null){if(_14d){this.html.style.background="transparent url("+_14c+") ";}else{this.html.style.background="transparent url("+_14c+") no-repeat";}}else{this.html.style.background="transparent";}};draw2d.Canvas.prototype.getY=function(){return this.y;};draw2d.Canvas.prototype.getX=function(){return this.x;};draw2d.Canvas.prototype.getAbsoluteY=function(){var el=this.html;var ot=el.offsetTop;while((el=el.offsetParent)!==null){ot+=el.offsetTop;}return ot;};draw2d.Canvas.prototype.getAbsoluteX=function(){var el=this.html;var ol=el.offsetLeft;while((el=el.offsetParent)!==null){ol+=el.offsetLeft;}return ol;};draw2d.Canvas.prototype.getScrollLeft=function(){return this.scrollArea.scrollLeft;};draw2d.Canvas.prototype.getScrollTop=function(){return this.scrollArea.scrollTop;};